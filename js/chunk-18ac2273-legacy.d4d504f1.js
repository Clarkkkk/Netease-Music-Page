(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18ac2273"],{1246:function(t,n,s){"use strict";var a=s("f08b"),e=s.n(a);e.a},1316:function(t,n,s){"use strict";var a=s("c8e7"),e=s.n(a);e.a},1980:function(t,n,s){"use strict";var a=s("ff89"),e=s.n(a);e.a},7223:function(t,n,s){"use strict";var a=function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"app-back-button",on:{tap:t.back,click:t.back}},[s("app-icon",{attrs:{icon:"go-back"}})],1)},e=[],o={data:function(){return{lastClick:0}},methods:{back:function(t){if(Date.now()-this.lastClick<100)console.log("duplicate click");else{this.lastClick=Date.now();var n=this.$store.getters["routeHistory/lastRoute"];n?this.$router.push({name:n,params:{back:!0}}):this.$router.push({name:"discover",params:{back:!0}})}}}},i=o,c=(s("1316"),s("2877")),r=Object(c["a"])(i,a,e,!1,null,"6986574d",null);n["a"]=r.exports},a15b:function(t,n,s){"use strict";var a=s("23e7"),e=s("44ad"),o=s("fc6a"),i=s("a640"),c=[].join,r=e!=Object,l=i("join",",");a({target:"Array",proto:!0,forced:r||!l},{join:function(t){return c.call(o(this),void 0===t?",":t)}})},b109:function(t,n,s){"use strict";s.r(n);var a=function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{attrs:{id:"rank"}},[s("div",{staticClass:"header"},[s("app-back-button"),s("div",{staticClass:"title"},[t._v("我的听歌排行")])],1),s("nav",{staticClass:"nav"},[s("div",{class:{active:"week-list"===t.nav},on:{click:function(n){t.nav="week-list"}}},[t._v(" 最近一周 ")]),s("div",{class:{active:"all-list"===t.nav},on:{click:function(n){t.nav="all-list"}}},[t._v(" 所有时间 ")])]),s("div",{ref:"wrapper",staticClass:"list"},[s("div",{staticClass:"content"},t._l(t.currentList,(function(n){return s("app-song-entry",{key:n.id,attrs:{songId:n.id,songName:n.name,songArtist:n.artist,songAlbum:n.album,songCover:n.cover},scopedSlots:t._u([{key:"count",fn:function(){return[s("span",{staticClass:"count"},[t._v(t._s(n.playCount+"次"))])]},proxy:!0}],null,!0)})})),1)])])},e=[],o=(s("a15b"),s("d81d"),s("b0c0"),s("d1c7")),i=s("424d"),c=s("7223"),r=s("c4de"),l={name:"rank",data:function(){return{weekList:[],allList:[],nav:"week-list"}},computed:{currentList:function(){return"week-list"===this.nav?this.weekList:this.allList}},components:{AppBackButton:c["a"],AppSongEntry:r["a"]},created:function(){var t=this;Object(o["a"])("/user/record",{uid:this.$store.state.auth.userID,type:1}).then((function(n){return console.log(n),200===n.code&&(t.weekList=n.weekData.map((function(t){var n=t.song.ar.map((function(t){return t.name})).join("/");return{id:t.song.id,name:t.song.name,artist:n,album:t.song.al.name,cover:t.song.al.picUrl,playCount:t.playCount}}))),Object(o["a"])("/user/record",{uid:t.$store.state.auth.userID,type:0})})).then((function(n){console.log(n),200===n.code&&(t.allList=n.allData.map((function(t){var n=t.song.ar.map((function(t){return t.name})).join("/");return{id:t.song.id,name:t.song.name,artist:n,album:t.song.al.name,cover:t.song.al.picUrl,playCount:t.playCount}})))}))},mounted:function(){var t=this;this.$nextTick().then((function(){t.scroll=Object(i["a"])(0,t.$refs.wrapper)}))},updated:function(){this.scroll.refresh()},deactivated:function(){this.scroll.disable()},activated:function(){this.scroll&&this.scroll.enable()},beforeDestroy:function(){this.scroll.destroy()}},u=l,p=(s("1980"),s("2877")),d=Object(p["a"])(u,a,e,!1,null,"578f9da8",null);n["default"]=d.exports},c4de:function(t,n,s){"use strict";var a=function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{staticClass:"app-song-entry",on:{click:t.play,tap:t.play}},[s("span",{staticClass:"name"},[t._v(" "+t._s(t.songName)+" ")]),s("span",{staticClass:"info"},[t._v(" "+t._s(t.songInfoString)+" ")]),t._t("count")],2)},e=[],o=(s("ac1f"),s("5319"),s("d1c7")),i={data:function(){return{lastClick:0}},props:["songName","songArtist","songAlbum","songId","songCover"],computed:{songInfoString:function(){return this.songAlbum?this.songArtist+" - "+this.songAlbum:this.songArtist}},methods:{play:function(){var t=this;Date.now()-this.lastClick<100||(this.lastClick=Date.now(),Object(o["a"])("/check/music",{id:this.songId}).then((function(n){console.log(n),n.success?(t.$store.commit("commonPlay/addToPlay",{id:t.songId,name:t.songName,artist:t.songArtist,album:t.songAlbum,cover:t.songCover.replace("http:","https:")}),t.$router.push("/play")):alert("这首歌暂无版权")})))}}},c=i,r=(s("1246"),s("2877")),l=Object(r["a"])(c,a,e,!1,null,"05373035",null);n["a"]=l.exports},c8e7:function(t,n,s){},f08b:function(t,n,s){},ff89:function(t,n,s){}}]);
//# sourceMappingURL=chunk-18ac2273-legacy.d4d504f1.js.map