(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["songlist"],{"0027":function(t,a,s){"use strict";s.d(a,"a",(function(){return i})),s.d(a,"b",(function(){return n}));var i=function(){var t=this,a=t.$createElement;t._self._c;return t._m(0)},n=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"loading-spinner"}},[s("div",{staticClass:"spinner-icon"},[s("div",{staticClass:"bar bar-one"}),s("div",{staticClass:"bar bar-two"}),s("div",{staticClass:"bar bar-three"}),s("div",{staticClass:"bar bar-four"}),s("div",{staticClass:"bar bar-five"}),s("div",{staticClass:"bar bar-six"}),s("div",{staticClass:"bar bar-seven"}),s("div",{staticClass:"bar bar-eight"}),s("div",{staticClass:"bar bar-nine"}),s("div",{staticClass:"bar bar-ten"}),s("div",{staticClass:"bar bar-eleven"}),s("div",{staticClass:"bar bar-twelve"})])])}]},1246:function(t,a,s){"use strict";var i=s("f08b"),n=s.n(i);n.a},1316:function(t,a,s){"use strict";var i=s("c8e7"),n=s.n(i);n.a},"44cb":function(t,a,s){},"495c":function(t,a,s){"use strict";var i=s("44cb"),n=s.n(i);n.a},"4c86":function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{ref:"wrapper",attrs:{id:"song-list"}},[s("div",{ref:"backgroundBox",staticClass:"background-container"},[s("div",{ref:"background",staticClass:"background fade-in",style:t.bgStyle})]),s("div",{class:["fixed-container",{blur:"songlist"===t.type}]},[s("div",{staticClass:"header"},[s("app-back-button"),s("div",{staticClass:"title"},[t._v(" "+t._s(t.title?t.title:"歌单")+" ")]),s("div",{staticClass:"right"},[t._t("right")],2)],1),s("div",{ref:"info",staticClass:"info"},["songlist"===t.type?s("div",{staticClass:"cover"},[s("img",{staticClass:"fade-in",attrs:{src:t.cover}})]):t._e(),t.name?s("div",{staticClass:"name"},[t._v(" "+t._s(t.name)+" ")]):t._e(),t.creator?s("div",{staticClass:"creator"},[t._v(" "+t._s(t.creator)+" ")]):t._e(),t.description?s("div",{staticClass:"description"},[t._v(" "+t._s(t.description)+" ")]):t._e(),"recommendation"===t.type?s("div",{staticClass:"date"},[t._v(" "+t._s(t.dateString)+" ")]):t._e()]),s("div",{staticClass:"playall",on:{tap:t.playAll}},[s("app-icon",{attrs:{icon:"play-circle"}}),s("span",[t._v("播放全部")])],1)]),s("div",{staticClass:"list"},[s("div",{staticClass:"placeholder"}),t.loading?s("app-loading-icon"):t._e(),t._l(t.list,(function(t){return s("app-song-entry",{key:t.id,staticClass:"entry",attrs:{songName:t.name,songArtist:t.artist,songId:t.id,songAlbum:t.album,songCover:t.cover}})}))],2)])},n=[],e=(s("a4d3"),s("e01a"),s("99af"),s("a15b"),s("d81d"),s("b0c0"),s("ac1f"),s("5319"),s("7223")),c=s("c4de"),r=s("f79c"),o=s("d1c7"),l=s("424d"),d={name:"songlist",data:function(){return{loading:!0,title:"",name:"",creator:"",description:"",cover:s("987d"),tags:[],list:[]}},props:["type","listId"],computed:{dateString:function(){var t=new Date,a=t.getHours(),s="你好";return a>=6&&a<=12?s="早上好":a>=13&&a<=18?s="下午好":a>=19&&a<=24?s="晚上好":a>=0&&a<=5&&(s="早点睡哦"),"".concat(t.getMonth(),"月").concat(t.getDate(),"日，").concat(s)},bgStyle:function(){return"songlist"===this.type?"background-image:url(".concat(this.cover,")"):"background-image:linear-gradient( 135deg, #FEB692 10%, #EA5455 100%)"}},components:{AppBackButton:e["a"],AppSongEntry:c["a"],AppLoadingIcon:r["default"]},created:function(){var t=this;"recommendation"===this.type?(this.title="每日推荐",Object(o["a"])("/recommend/songs").then((function(a){200===a.code&&t.createList(a.data.dailySongs)}))):"songlist"===this.type&&Object(o["a"])("/playlist/detail",{id:this.listId}).then((function(a){if(200===a.code){console.log(a),t.name=a.playlist.name,t.creator=a.playlist.creator.nickname,t.description=a.playlist.description,t.cover=a.playlist.coverImgUrl.replace("http:","https:"),t.tags=a.playlist.tags;var s=a.playlist.trackIds.map((function(t){return t.id})).join(",");if(t.createList(a.playlist.tracks),a.playlist.tracks.length<a.playlist.trackCount)return Object(o["a"])("/song/detail",{ids:s})}})).then((function(a){a&&200===a.code&&t.createList(a.songs)}))},mounted:function(){this.cover||(this.$refs.background.style.backgroundImage="linear-gradient( 135deg, #FEB692 10%, #EA5455 100%)")},updated:function(){this.scroll&&this.scroll.refresh()},deactivated:function(){this.scroll.disable()},activated:function(){this.scroll&&this.scroll.enable()},beforeDestroy:function(){this.scroll.destroy()},watch:{loading:function(t){var a=this;t||this.$nextTick().then((function(){a.scroll=Object(l["a"])(2,a.$refs.wrapper,s);var t=a;function s(a){var s=-a.y/200<1?-a.y/200:1;t.$refs.info.style.opacity="".concat(1-s),t.$refs.info.style.height="calc(12rem + (".concat(a.y,"px))"),t.$refs.backgroundBox.style.height="calc(15rem + (".concat(a.y,"px))"),t.$refs.background.style.height="calc(15rem + (".concat(a.y,"px))")}})).catch((function(t){console.log(t)}))}},methods:{playAll:function(){this.$router.push("/play"),this.$store.commit("commonPlay/playTheList",this.list)},createList:function(t){this.list=t.map((function(t){var a=t.ar.map((function(t){return t.name})).join("/");return{id:t.id,name:t.name,artist:a,album:t.al.name,cover:t.al.picUrl.replace("http:","https:")}})),this.loading=!1}}},u=d,p=(s("495c"),s("2877")),f=Object(p["a"])(u,i,n,!1,null,"65fa9e7d",null);a["default"]=f.exports},5175:function(t,a,s){"use strict";var i=s("bbd5"),n=s.n(i);n.a},"5b38":function(t,a,s){"use strict";var i=s("6232"),n=s.n(i);a["default"]=n.a},6232:function(t,a){},7223:function(t,a,s){"use strict";var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"app-back-button",on:{tap:t.back,click:t.back}},[s("app-icon",{attrs:{icon:"go-back"}})],1)},n=[],e={data:function(){return{lastClick:0}},methods:{back:function(t){if(Date.now()-this.lastClick<100)console.log("duplicate click");else{this.lastClick=Date.now();var a=this.$store.getters["routeHistory/lastRoute"];a?this.$router.push({name:a,params:{back:!0}}):this.$router.push({name:"discover",params:{back:!0}})}}}},c=e,r=(s("1316"),s("2877")),o=Object(r["a"])(c,i,n,!1,null,"6986574d",null);a["a"]=o.exports},"987d":function(t,a,s){t.exports=s.p+"img/default-pic.5cfc656e.jpg"},a15b:function(t,a,s){"use strict";var i=s("23e7"),n=s("44ad"),e=s("fc6a"),c=s("a640"),r=[].join,o=n!=Object,l=c("join",",");i({target:"Array",proto:!0,forced:o||!l},{join:function(t){return r.call(e(this),void 0===t?",":t)}})},bbd5:function(t,a,s){},c4de:function(t,a,s){"use strict";var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"app-song-entry",on:{click:t.play,tap:t.play}},[s("span",{staticClass:"name"},[t._v(" "+t._s(t.songName)+" ")]),s("span",{staticClass:"info"},[t._v(" "+t._s(t.songInfoString)+" ")]),t._t("count")],2)},n=[],e=(s("ac1f"),s("5319"),s("d1c7")),c={data:function(){return{lastClick:0}},props:["songName","songArtist","songAlbum","songId","songCover"],computed:{songInfoString:function(){return this.songAlbum?this.songArtist+" - "+this.songAlbum:this.songArtist}},methods:{play:function(){var t=this;Date.now()-this.lastClick<100||(this.lastClick=Date.now(),Object(e["a"])("/check/music",{id:this.songId}).then((function(a){console.log(a),a.success?(t.$store.commit("commonPlay/addToPlay",{id:t.songId,name:t.songName,artist:t.songArtist,album:t.songAlbum,cover:t.songCover.replace("http:","https:")}),t.$router.push("/play")):alert("这首歌暂无版权")})))}}},r=c,o=(s("1246"),s("2877")),l=Object(o["a"])(r,i,n,!1,null,"05373035",null);a["a"]=l.exports},c8e7:function(t,a,s){},f08b:function(t,a,s){},f79c:function(t,a,s){"use strict";var i=s("0027"),n=s("5b38"),e=(s("5175"),s("2877")),c=Object(e["a"])(n["default"],i["a"],i["b"],!1,null,null,null);a["default"]=c.exports}}]);
//# sourceMappingURL=songlist-legacy.b94399b5.js.map