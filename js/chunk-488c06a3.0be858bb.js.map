{"version":3,"sources":["webpack:///./src/components/AppSongEntry.vue?12cd","webpack:///./src/components/AppBackButton.vue?81ae","webpack:///./src/views/Account/Rank.vue?1de4","webpack:///./src/components/AppBackButton.vue?5108","webpack:///src/components/AppBackButton.vue","webpack:///./src/components/AppBackButton.vue?012c","webpack:///./src/components/AppBackButton.vue","webpack:///./src/views/Account/Rank.vue?93a1","webpack:///src/views/Account/Rank.vue","webpack:///./src/views/Account/Rank.vue?56f3","webpack:///./src/views/Account/Rank.vue","webpack:///./src/components/AppSongEntry.vue?b8fe","webpack:///src/components/AppSongEntry.vue","webpack:///./src/components/AppSongEntry.vue?7c7e","webpack:///./src/components/AppSongEntry.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","back","attrs","staticRenderFns","lastClick","methods","event","Date","now","console","log","lastRoute","$store","getters","$router","push","name","params","component","_v","class","nav","$event","ref","_l","song","key","id","artist","album","cover","scopedSlots","_u","fn","_s","playCount","proxy","weekList","allList","computed","components","AppBackButton","AppSongEntry","uid","state","auth","userID","type","res","code","weekData","map","arString","item","ar","al","picUrl","allData","$nextTick","scroll","refresh","disable","enable","destroy","play","songName","songInfoString","_t","props","songAlbum","songArtist"],"mappings":"gHAAA,yBAAygB,EAAG,G,kCCA5gB,yBAA0gB,EAAG,G,kCCA7gB,yBAAmhB,EAAG,G,kCCAthB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkBC,GAAG,CAAC,IAAMP,EAAIQ,KAAK,MAAQR,EAAIQ,OAAO,CAACJ,EAAG,WAAW,CAACK,MAAM,CAAC,KAAO,cAAc,IACtNC,EAAkB,GCMtB,GACE,OACE,MAAO,CACLC,UAAW,IAIfC,QAAS,CACP,KAAKC,GAEH,GAAIC,KAAKC,MAAQd,KAAKU,UAAY,IAEhC,YADAK,QAAQC,IAAI,mBAGdhB,KAAKU,UAAYG,KAAKC,MACtB,MAAMG,EAAYjB,KAAKkB,OAAOC,QAAQ,0BAClCF,EACFjB,KAAKoB,QAAQC,KAAK,CAChBC,KAAML,EACNM,OAAQ,CACNhB,MAAM,KAIVP,KAAKoB,QAAQC,KAAK,CAChBC,KAAM,WACNC,OAAQ,CACNhB,MAAM,QClCqU,I,wBCQnViB,EAAY,eACd,EACA1B,EACAW,GACA,EACA,KACA,WACA,MAIa,OAAAe,E,kDCnBf,IAAI1B,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACK,MAAM,CAAC,GAAK,SAAS,CAACL,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,mBAAmBA,EAAG,MAAM,CAACE,YAAY,SAAS,CAACN,EAAI0B,GAAG,aAAa,GAAGtB,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACuB,MAAM,CAAC,OAAoB,cAAV3B,EAAI4B,KAAmBrB,GAAG,CAAC,MAAQ,SAASsB,GAAQ7B,EAAI4B,IAAI,eAAe,CAAC5B,EAAI0B,GAAG,YAAYtB,EAAG,MAAM,CAACuB,MAAM,CAAC,OAAoB,aAAV3B,EAAI4B,KAAkBrB,GAAG,CAAC,MAAQ,SAASsB,GAAQ7B,EAAI4B,IAAI,cAAc,CAAC5B,EAAI0B,GAAG,cAActB,EAAG,MAAM,CAAC0B,IAAI,UAAUxB,YAAY,QAAQ,CAACF,EAAG,MAAM,CAACE,YAAY,WAAWN,EAAI+B,GAAI/B,EAAe,aAAE,SAASgC,GAAM,OAAO5B,EAAG,iBAAiB,CAAC6B,IAAID,EAAKE,GAAGzB,MAAM,CAAC,OAASuB,EAAKE,GAAG,SAAWF,EAAKT,KAAK,WAAaS,EAAKG,OAAO,UAAYH,EAAKI,MAAM,UAAYJ,EAAKK,OAAOC,YAAYtC,EAAIuC,GAAG,CAAC,CAACN,IAAI,QAAQO,GAAG,WAAW,MAAO,CAACpC,EAAG,OAAO,CAACE,YAAY,SAAS,CAACN,EAAI0B,GAAG1B,EAAIyC,GAAGT,EAAKU,UAAY,UAAUC,OAAM,IAAO,MAAK,QAAU,QAC56BjC,EAAkB,G,gDC4CtB,GACEa,KAAM,OACN,OACE,MAAO,CACLqB,SAAU,GACVC,QAAS,GACTjB,IAAK,cAITkB,SAAU,CACR,cACE,MAAiB,cAAb7C,KAAK2B,IACA3B,KAAK2C,SAEL3C,KAAK4C,UAKlBE,WAAY,CACVC,cAAJ,OACIC,aAAJ,QAGE,UACE,OAAJ,OAAI,CAAJ,gBACMC,IAAKjD,KAAKkB,OAAOgC,MAAMC,KAAKC,OAC5BC,KAAM,IACZ,SACMtC,QAAQC,IAAIsC,GACK,MAAbA,EAAIC,OACNvD,KAAK2C,SAAWW,EAAIE,SAASC,IAAI,IAC/B,MAAMC,EAAWC,EAAK5B,KAAK6B,GAAGH,IAAI,GAA5C,kBACU,MAAO,CACLxB,GAAI0B,EAAK5B,KAAKE,GACdX,KAAMqC,EAAK5B,KAAKT,KAChBY,OAAQwB,EACRvB,MAAOwB,EAAK5B,KAAK8B,GAAGvC,KACpBc,MAAOuB,EAAK5B,KAAK8B,GAAGC,OACpBrB,UAAWkB,EAAKlB,cAIf,OAAb,OAAa,CAAb,gBACQQ,IAAKjD,KAAKkB,OAAOgC,MAAMC,KAAKC,OAC5BC,KAAM,MAEd,SACMtC,QAAQC,IAAIsC,GACK,MAAbA,EAAIC,OACNvD,KAAK4C,QAAUU,EAAIS,QAAQN,IAAI,IAC7B,MAAMC,EAAWC,EAAK5B,KAAK6B,GAAGH,IAAI,GAA5C,kBACU,MAAO,CACLxB,GAAI0B,EAAK5B,KAAKE,GACdX,KAAMqC,EAAK5B,KAAKT,KAChBY,OAAQwB,EACRvB,MAAOwB,EAAK5B,KAAK8B,GAAGvC,KACpBc,MAAOuB,EAAK5B,KAAK8B,GAAGC,OACpBrB,UAAWkB,EAAKlB,iBAO1B,UACEzC,KAAKgE,YACT,UACM,KAAN,+CAIE,UACEhE,KAAKiE,OAAOC,WAGd,cACElE,KAAKiE,OAAOE,WAGd,YACMnE,KAAKiE,QACPjE,KAAKiE,OAAOG,UAIhB,gBACEpE,KAAKiE,OAAOI,YCrI6U,I,wBCQzV7C,EAAY,eACd,EACA1B,EACAW,GACA,EACA,KACA,WACA,MAIa,aAAAe,E,2CCnBf,IAAI1B,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,iBAAiBC,GAAG,CAAC,MAAQP,EAAIuE,KAAK,IAAMvE,EAAIuE,OAAO,CAACnE,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACN,EAAI0B,GAAG,IAAI1B,EAAIyC,GAAGzC,EAAIwE,UAAU,OAAOpE,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACN,EAAI0B,GAAG,IAAI1B,EAAIyC,GAAGzC,EAAIyE,gBAAgB,OAAOzE,EAAI0E,GAAG,UAAU,IAC/UhE,EAAkB,G,wBCatB,GACE,OACE,MAAO,CACLC,UAAW,IAGfgE,MAAO,CAAC,WAAY,aAAc,YAAa,SAAU,aACzD7B,SAAU,CACR2B,eAAgB,WACd,OAAIxE,KAAK2E,UACA3E,KAAK4E,WAAa,MAAQ5E,KAAK2E,UAE/B3E,KAAK4E,aAIlBjE,QAAS,CACP,OAEME,KAAKC,MAAQd,KAAKU,UAAY,MAGlCV,KAAKU,UAAYG,KAAKC,MACtB,OAAN,OAAM,CAAN,iCACA,SACQ,QAAR,OACA,WACU,KAAV,sCACY,GAAZ,YACY,KAAZ,cACY,OAAZ,gBACY,MAAZ,eACY,MAAZ,2CAEU,KAAV,uBAEU,MAAV,iBClDsV,I,wBCQlVU,EAAY,eACd,EACA1B,EACAW,GACA,EACA,KACA,WACA,MAIa,OAAAe,E","file":"js/chunk-488c06a3.0be858bb.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppSongEntry.vue?vue&type=style&index=0&id=05373035&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppSongEntry.vue?vue&type=style&index=0&id=05373035&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppBackButton.vue?vue&type=style&index=0&id=6986574d&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppBackButton.vue?vue&type=style&index=0&id=6986574d&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Rank.vue?vue&type=style&index=0&id=578f9da8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Rank.vue?vue&type=style&index=0&id=578f9da8&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-back-button\",on:{\"tap\":_vm.back,\"click\":_vm.back}},[_c('app-icon',{attrs:{\"icon\":\"go-back\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"app-back-button\" @tap=\"back\" @click=\"back\">\n    <app-icon icon=\"go-back\" />\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      lastClick: 0\n    };\n  },\n\n  methods: {\n    back(event) {\n      // avoid duplicate click fired by both click and tap\n      if (Date.now() - this.lastClick < 100) {\n        console.log('duplicate click');\n        return;\n      }\n      this.lastClick = Date.now();\n      const lastRoute = this.$store.getters['routeHistory/lastRoute'];\n      if (lastRoute) {\n        this.$router.push({\n          name: lastRoute,\n          params: {\n            back: true\n          }\n        });\n      } else {\n        this.$router.push({\n          name: 'discover',\n          params: {\n            back: true\n          }\n        });\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.app-back-button {\n  grid-column: back;\n  grid-row: start / end;\n  cursor: pointer;\n  width: 2rem;\n  height: 2rem;\n  font-size: 1.5rem;\n  display: grid;\n  align-items: center;\n  justify-items: center;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppBackButton.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppBackButton.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AppBackButton.vue?vue&type=template&id=6986574d&scoped=true&\"\nimport script from \"./AppBackButton.vue?vue&type=script&lang=js&\"\nexport * from \"./AppBackButton.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AppBackButton.vue?vue&type=style&index=0&id=6986574d&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6986574d\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"rank\"}},[_c('div',{staticClass:\"header\"},[_c('app-back-button'),_c('div',{staticClass:\"title\"},[_vm._v(\"我的听歌排行\")])],1),_c('nav',{staticClass:\"nav\"},[_c('div',{class:{'active': _vm.nav==='week-list'},on:{\"click\":function($event){_vm.nav='week-list'}}},[_vm._v(\" 最近一周 \")]),_c('div',{class:{'active': _vm.nav==='all-list'},on:{\"click\":function($event){_vm.nav='all-list'}}},[_vm._v(\" 所有时间 \")])]),_c('div',{ref:\"wrapper\",staticClass:\"list\"},[_c('div',{staticClass:\"content\"},_vm._l((_vm.currentList),function(song){return _c('app-song-entry',{key:song.id,attrs:{\"songId\":song.id,\"songName\":song.name,\"songArtist\":song.artist,\"songAlbum\":song.album,\"songCover\":song.cover},scopedSlots:_vm._u([{key:\"count\",fn:function(){return [_c('span',{staticClass:\"count\"},[_vm._v(_vm._s(song.playCount + '次'))])]},proxy:true}],null,true)})}),1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"rank\">\n    <div class=\"header\">\n      <app-back-button/>\n      <div class=\"title\">我的听歌排行</div>\n    </div>\n    <nav class=\"nav\">\n      <div\n        @click=\"nav='week-list'\"\n        :class=\"{'active': nav==='week-list'}\"\n      >\n        最近一周\n      </div>\n      <div\n        @click=\"nav='all-list'\"\n        :class=\"{'active': nav==='all-list'}\"\n      >\n        所有时间\n      </div>\n    </nav>\n    <div class=\"list\" ref=\"wrapper\">\n      <div class=\"content\">\n        <app-song-entry\n          v-for=\"song in currentList\"\n          :key=\"song.id\"\n          :songId=\"song.id\"\n          :songName=\"song.name\"\n          :songArtist=\"song.artist\"\n          :songAlbum=\"song.album\"\n          :songCover=\"song.cover\"\n        >\n          <template v-slot:count>\n            <span class=\"count\">{{ song.playCount + '次' }}</span>\n          </template>\n        </app-song-entry>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport fetchJSON from '@/functions/fetchJSON.js';\nimport createScroll from '@/functions/createScroll.js';\nimport AppBackButton from '@/components/AppBackButton.vue';\nimport AppSongEntry from '@/components/AppSongEntry.vue';\nexport default {\n  name: 'rank',\n  data() {\n    return {\n      weekList: [],\n      allList: [],\n      nav: 'week-list'\n    };\n  },\n\n  computed: {\n    currentList() {\n      if (this.nav === 'week-list') {\n        return this.weekList;\n      } else {\n        return this.allList;\n      }\n    }\n  },\n\n  components: {\n    AppBackButton,\n    AppSongEntry\n  },\n\n  created() {\n    fetchJSON('/user/record', {\n      uid: this.$store.state.auth.userID,\n      type: 1\n    }).then((res) => {\n      console.log(res);\n      if (res.code === 200) {\n        this.weekList = res.weekData.map((item) => {\n          const arString = item.song.ar.map((ar) => ar.name).join('/');\n          return {\n            id: item.song.id,\n            name: item.song.name,\n            artist: arString,\n            album: item.song.al.name,\n            cover: item.song.al.picUrl,\n            playCount: item.playCount\n          };\n        });\n      }\n      return fetchJSON('/user/record', {\n        uid: this.$store.state.auth.userID,\n        type: 0\n      });\n    }).then((res) => {\n      console.log(res);\n      if (res.code === 200) {\n        this.allList = res.allData.map((item) => {\n          const arString = item.song.ar.map((ar) => ar.name).join('/');\n          return {\n            id: item.song.id,\n            name: item.song.name,\n            artist: arString,\n            album: item.song.al.name,\n            cover: item.song.al.picUrl,\n            playCount: item.playCount\n          };\n        });\n      }\n    });\n  },\n\n  mounted() {\n    this.$nextTick()\n      .then(() => {\n        this.scroll = createScroll(0, this.$refs.wrapper);\n      });\n  },\n\n  updated() {\n    this.scroll.refresh();\n  },\n\n  deactivated() {\n    this.scroll.disable();\n  },\n\n  activated() {\n    if (this.scroll) {\n      this.scroll.enable();\n    }\n  },\n\n  beforeDestroy() {\n    this.scroll.destroy();\n  },\n};\n</script>\n\n<style scoped>\n#rank {\n  height: calc(100vh - 2.5rem);\n  width: 100vw;\n  display: grid;\n  background-color: white;\n  grid-template-rows:\n    [start header-start] min-content [header-end nav-start]\n    2.5rem [nav-end list-start] 1fr [list-end];\n  grid-template-columns:\n    [start] 100% [end];\n}\n\n.header {\n  height: 3rem;\n  padding-top: env(safe-area-inset-top);\n  width: 100%;\n  grid-row: header;\n  background-color: var(--app-color);\n  color: white;\n  grid-column: start / end;\n  display: grid;\n  grid-template-columns:\n    [back-start] 3rem [back-end title-start]\n    1fr [title-end right-start] 3rem [right-end];\n  grid-template-rows: [start] 100% [end];\n  place-items: center;\n}\n\n.title {\n  grid-column: title;\n  grid-row: start / end;\n  font-size: 1.1rem;\n  font-weight: bold;\n}\n\n.nav {\n  grid-row: nav;\n  display: grid;\n  grid-column: 1fr 1fr;\n  grid-auto-flow: column;\n  place-items: center;\n}\n\n.active {\n  border-bottom: 2px solid var(--app-color);\n}\n\n.list {\n  width: 100%;\n  height: 100%;\n  grid-row: list;\n  overflow: hidden;\n  grid-column: start / end;\n  position: relative;\n}\n\n.content {\n  width: 100%;\n  min-height: 101%;\n  display: grid;\n  grid-auto-rows: 3rem;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Rank.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Rank.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Rank.vue?vue&type=template&id=578f9da8&scoped=true&\"\nimport script from \"./Rank.vue?vue&type=script&lang=js&\"\nexport * from \"./Rank.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Rank.vue?vue&type=style&index=0&id=578f9da8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"578f9da8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-song-entry\",on:{\"click\":_vm.play,\"tap\":_vm.play}},[_c('span',{staticClass:\"name\"},[_vm._v(\" \"+_vm._s(_vm.songName)+\" \")]),_c('span',{staticClass:\"info\"},[_vm._v(\" \"+_vm._s(_vm.songInfoString)+\" \")]),_vm._t(\"count\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"app-song-entry\" @click=\"play\" @tap=\"play\">\n    <span class=\"name\">\n      {{ songName }}\n    </span>\n    <span class=\"info\">\n      {{ songInfoString }}\n    </span>\n    <slot name=\"count\"></slot>\n  </div>\n</template>\n\n<script>\nimport fetchJSON from '@/functions/fetchJSON.js';\nexport default {\n  data() {\n    return {\n      lastClick: 0\n    };\n  },\n  props: ['songName', 'songArtist', 'songAlbum', 'songId', 'songCover'],\n  computed: {\n    songInfoString: function() {\n      if (this.songAlbum) {\n        return this.songArtist + ' - ' + this.songAlbum;\n      } else {\n        return this.songArtist;\n      }\n    }\n  },\n  methods: {\n    play() {\n      // avoid duplicate click fired by both click and tap\n      if (Date.now() - this.lastClick < 100) {\n        return;\n      }\n      this.lastClick = Date.now();\n      fetchJSON('/check/music', {id: this.songId})\n        .then((result) => {\n          console.log(result);\n          if (result.success) {\n            this.$store.commit('commonPlay/addToPlay', {\n              id: this.songId,\n              name: this.songName,\n              artist: this.songArtist,\n              album: this.songAlbum,\n              cover: this.songCover.replace('http:', 'https:')\n            });\n            this.$router.push('/play');\n          } else {\n            alert('这首歌暂无版权');\n          }\n        });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.app-song-entry {\n  width: 100%;\n  height: 100%;\n  padding: 0.3rem 1rem;\n  box-sizing: border-box;\n  display: grid;\n  grid-template-rows: [start name-start] 1.2fr [name-end info-start] 1fr [info-end end];\n  grid-template-columns: [info-start] 1fr [info-end count-start] max-content [count-end];\n  justify-items: start;\n  border-bottom: 1px solid #eee;\n  cursor: pointer;\n}\n\n.name {\n  width: 100%;\n  height: 100%;\n  grid-row: name;\n  grid-column: info;\n  font-size: 1rem;\n  color: black;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.info {\n  width: 100%;\n  height: 100%;\n  grid-row: info;\n  grid-column: info;\n  font-size: 0.8rem;\n  color: #666;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.count {\n  grid-row: start / end;\n  grid-column: count;\n  height: 100%;\n  justify-self: end;\n  font-size: 0.8rem;\n  color: #666;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppSongEntry.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppSongEntry.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AppSongEntry.vue?vue&type=template&id=05373035&scoped=true&\"\nimport script from \"./AppSongEntry.vue?vue&type=script&lang=js&\"\nexport * from \"./AppSongEntry.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AppSongEntry.vue?vue&type=style&index=0&id=05373035&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"05373035\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}