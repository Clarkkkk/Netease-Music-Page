(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2399a56a"],{"01df":function(t,i,e){"use strict";var a=e("4c3d"),n=e.n(a);n.a},"115b":function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"app-loop-text"}},[e("div",{ref:"text",staticClass:"text"},[t._v(t._s(t.text))]),e("div",{ref:"clone",staticClass:"clone"},[t._v(t._s(t.text))])])},n=[],s={props:["text"],data:function(){return{intervalID:0}},created:function(){this.animate=this._animate.bind(this)},mounted:function(){var t=this;this.$nextTick().then((function(){t.boxWidth=t.$el.clientWidth,t.textWidth=t.$refs.text.clientWidth,t.boxWidth<t.textWidth&&(t.animate(),t.intervalID=setInterval(t.animate,12e3))}))},watch:{text:function(){var t=this;this.$nextTick().then((function(){t.boxWidth=t.$el.clientWidth,t.textWidth=t.$refs.text.clientWidth,clearInterval(t.intervalID),t.boxWidth<t.textWidth&&(t.animate(),t.intervalID=setInterval(t.animate,12e3))}))}},methods:{_animate:function(){this.$refs.text.classList.remove("loop"),this.$refs.clone.classList.remove("loop"),this.$refs.text.style.transform="translateX(0px)",this.$refs.clone.style.transform="translateX(".concat(this.textWidth,"px)"),document.body.offsetWidth,this.$refs.text.classList.add("loop"),this.$refs.clone.classList.add("loop"),this.$refs.text.style.transform="translateX(".concat(-this.textWidth,"px)"),this.$refs.clone.style.transform="translateX(0px)"}}},c=s,o=(e("1edd"),e("2877")),r=Object(o["a"])(c,a,n,!1,null,"7033acc7",null);i["a"]=r.exports},"120a":function(t,i,e){},1316:function(t,i,e){"use strict";var a=e("c8e7"),n=e.n(a);n.a},"133d":function(t,i,e){"use strict";var a=e("120a"),n=e.n(a);n.a},"1edd":function(t,i,e){"use strict";var a=e("7942"),n=e.n(a);n.a},"2c31":function(t,i,e){"use strict";var a=e("969a"),n=e.n(a);n.a},"48ad":function(t,i,e){},"4c3d":function(t,i,e){},"5b55":function(t,i,e){},7223:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"app-back-button",on:{tap:t.back,click:t.back}},[e("app-icon",{attrs:{icon:"go-back"}})],1)},n=[],s={data:function(){return{lastClick:0}},methods:{back:function(t){if(Date.now()-this.lastClick<100)console.log("duplicate click");else{this.lastClick=Date.now();var i=this.$store.getters["routeHistory/lastRoute"];i?this.$router.push({name:i,params:{back:!0}}):this.$router.push({name:"discover",params:{back:!0}})}}}},c=s,o=(e("1316"),e("2877")),r=Object(o["a"])(c,a,n,!1,null,"6986574d",null);i["a"]=r.exports},7942:function(t,i,e){},8363:function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"play"}},[e("img",{staticClass:"background",attrs:{alt:"背景图片",src:t.picUrl}}),e("div",{staticClass:"content"},[e("div",{staticClass:"header"},[e("app-back-button"),e("app-loop-text",{staticClass:"song-name",attrs:{text:t.playName}}),e("div",{staticClass:"song-artist"},[t._v(t._s(t.playArtist))])],1),e("play-cover"),e("play-interactions"),e("play-progress-bar"),e("play-controls",{attrs:{showPlayList:t.showPlayList},on:{"update:showPlayList":function(i){t.showPlayList=i},"update:show-play-list":function(i){t.showPlayList=i}}}),e("transition",{attrs:{name:"play-list"}},[t.showPlayList?e("play-list",{attrs:{show:t.showPlayList},on:{"update:show":function(i){t.showPlayList=i}}}):t._e()],1)],1)])},n=[],s=e("5530"),c=e("7223"),o=e("115b"),r=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{class:{rolling:t.playing},attrs:{id:"play-cover"}},[e("img",{staticClass:"cover",attrs:{alt:"专辑图片",src:t.picUrl},on:{dragstart:t.dragPrevent}})])},l=[],u=(e("ac1f"),e("5319"),e("2f62")),p={computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(u["f"])("playStatus",["playing"])),Object(u["d"])("commonPlay",["playID","playCover"])),{},{picUrl:function(){return this.playCover?this.playCover.replace("http:","https:"):e("f0cd")}}),methods:{dragPrevent:function(t){t.preventDefault()}}},d=p,h=(e("ce32"),e("2877")),f=Object(h["a"])(d,r,l,!1,null,"473eaf4a",null),m=f.exports,v=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"play-interactions"}},[e("app-like-icon",{staticClass:"like"}),e("app-icon",{staticClass:"comments",attrs:{icon:"comment"}}),e("app-icon",{staticClass:"info",attrs:{icon:"vertical-dots"}})],1)},y=[],b=e("8bb5"),w={components:{AppLikeIcon:b["a"]}},k=w,g=(e("d218"),Object(h["a"])(k,v,y,!1,null,"48d841d8",null)),x=g.exports,$=e("b0b8"),O=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"play-controls"}},[e("div",{staticClass:"mode",on:{click:t.switchMode}},[e("app-icon",{attrs:{icon:t.mode}})],1),e("app-icon",{staticClass:"prev",attrs:{icon:"last-song"},nativeOn:{click:function(i){return t.lastSong(i)}}}),e("div",{staticClass:"play",on:{click:t.playOrPause}},[e("app-icon",{attrs:{icon:t.playing?"pause":"play"}})],1),e("app-icon",{staticClass:"next",attrs:{icon:"next-song"},nativeOn:{click:function(i){return t.nextSong(i)}}}),e("app-icon",{staticClass:"list",attrs:{icon:"playlist"},nativeOn:{click:function(i){return t.$emit("update:showPlayList",!0)}}})],1)},C=[],j={prop:["showPlayList"],computed:Object(s["a"])(Object(s["a"])({},Object(u["f"])("commonPlay",["mode"])),Object(u["f"])("playStatus",["playing"])),methods:Object(s["a"])(Object(s["a"])({},Object(u["e"])("commonPlay",["switchMode","lastSong","nextSong"])),Object(u["c"])("playStatus",["playOrPause"]))},_=j,L=(e("2c31"),Object(h["a"])(_,O,C,!1,null,"5731920c",null)),P=L.exports,D=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"playing-list"},on:{click:function(i){return i.target!==i.currentTarget?null:t.hide(i)}}},[e("transition",{attrs:{name:"list"}},[t.showList?e("div",{staticClass:"container"},[e("div",{staticClass:"header"},[e("span",{staticClass:"title"},[t._v("当前播放")]),e("span",{staticClass:"amount"},[t._v("（"+t._s(t.playList.length)+"）")]),e("app-icon",{staticClass:"clear",attrs:{icon:"trash"},nativeOn:{click:function(i){return t.clear(i)}}})],1),e("div",{ref:"wrapper",staticClass:"wrapper"},[e("div",{staticClass:"content"},t._l(t.playList,(function(i){return e("div",{key:i.id,class:["entry",{playing:i.id===t.playID}],on:{tap:function(e){return t.playSongOfList(i)}}},[i.id===t.playID?e("app-icon",{staticClass:"icon",attrs:{icon:"speaker"}}):t._e(),e("div",{staticClass:"song-info"},[t._v(" "+t._s(i.name+(i.artist?" - "+i.artist:""))+" ")])],1)})),0)])]):t._e()])],1)},I=[],S=e("424d"),T=Object(u["a"])("commonPlay"),W=T.mapState,X=T.mapGetters,E=T.mapMutations,M={data:function(){return{showList:!1}},porps:["show"],computed:Object(s["a"])(Object(s["a"])({},W(["playList"])),X(["playID"])),mounted:function(){var t=this;this.$nextTick().then((function(){t.showList=!0})).then((function(){t.scroll=Object(S["a"])(0,t.$refs.wrapper)}))},update:function(){this.scroll.refresh()},deactivated:function(){this.scroll.disable()},activated:function(){this.scroll&&this.scroll.enable()},beforeDestroy:function(){this.scroll.destroy()},methods:Object(s["a"])(Object(s["a"])({},E(["clear","playSongOfList"])),{},{hide:function(){var t=this;this.showList=!1,this.$nextTick((function(){t.$emit("update:show",!1)}))},afterLeave:function(){this.$emit("update:show",!1)}})},N=M,U=(e("eb4e"),Object(h["a"])(N,D,I,!1,null,"153c0567",null)),A=U.exports,B=Object(u["a"])("playStatus"),R=B.mapState,G=Object(u["a"])("commonPlay"),J=G.mapGetters,H={data:function(){return{showPlayList:!1}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},J(["playName","playArtist","playCover"])),R(["playing"])),{},{picUrl:function(){return this.playCover?this.playCover:e("f0cd")}}),components:{AppBackButton:c["a"],AppLoopText:o["a"],PlayCover:m,PlayInteractions:x,PlayProgressBar:$["a"],PlayControls:P,PlayList:A}},q=H,z=(e("133d"),Object(h["a"])(q,a,n,!1,null,"36154f50",null));i["default"]=z.exports},"8bb5":function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"app-like-icon"},on:{click:t.click}},[e("transition",{attrs:{name:"like",mode:"out-in"}},[e("app-icon",{key:t.iconName,class:{liked:t.isLiked},attrs:{icon:t.iconName}})],1)],1)},n=[],s=(e("caad"),e("2532"),e("d1c7")),c={computed:{login:function(){return this.$store.state.auth.login},playID:function(){return this.$store.getters["currentSong"].id},likelist:function(){return this.$store.state.likelist},isLiked:function(){return this.likelist.includes(this.playID)},iconName:function(){return this.isLiked?"like-fill":"like"}},methods:{click:function(t){var i=this;this.login?Object(s["a"])("/like",{id:this.playID,like:!this.isLiked}).then((function(t){console.log(t),200===t.code&&i.$store.dispatch("updateLikelist")})):window.confirm("该功能需要登录，是否前往登录？")&&this.$router.push({name:"login",params:{dock:!0}})}}},o=c,r=(e("01df"),e("2877")),l=Object(r["a"])(o,a,n,!1,null,"33665981",null);i["a"]=l.exports},"936e":function(t,i,e){},"969a":function(t,i,e){},b0b8:function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"play-progress-bar"}},[e("div",{staticClass:"time"},[t._v(" "+t._s(t.playTime)+" ")]),e("div",{ref:"container",staticClass:"container",on:{pointerdown:t.pointerDown,pointermove:t.pointerMove,pointerup:t.pointerUp}},[e("div",{staticClass:"groove"},[e("div",{ref:"played",staticClass:"played-section"}),e("div",{ref:"pointer",class:["pointer",{"pointer-down":t.isPointerDown},{waiting:t.waiting}]})])]),e("div",{staticClass:"time"},[t._v(" "+t._s(t.playDuration)+" ")])])},n=[],s=e("5530"),c=e("2f62"),o=Object(c["a"])("playStatus"),r=o.mapState,l=o.mapMutations,u={data:function(){return{isPointerDown:!1}},computed:Object(s["a"])(Object(s["a"])({},r(["currentTime","duration","waiting"])),{},{playTime:function(){return this.formatTime(this.currentTime)},playDuration:function(){return this.formatTime(this.duration)}}),mounted:function(){var t=this;this.$nextTick().then((function(){t.rect=t.$refs.container.getBoundingClientRect()}))},watch:{currentTime:function(t){if(!this.isPointerDown){var i=Math.max(t/this.duration,0);i<.01&&(this.$refs.pointer.style.transition="none"),this.$refs.pointer.style.transform="translateX(calc(".concat(i," * (70vw - 0.5rem))"),this.$refs.played.style.width="".concat(100*i,"%")}}},methods:Object(s["a"])(Object(s["a"])({},l(["seek"])),{},{formatTime:function(t){if(isNaN(t))return"-- : --";var i=Math.floor(t),e=i%60,a=(i-e)/60,n=e<10?"0"+e:e,s=a<10?"0"+a:a;return s+":"+n},pointerDown:function(t){this.isPointerDown=!0,this.rect=this.$refs.container.getBoundingClientRect(),this.width=this.rect.right-this.rect.left;var i=t.clientX-this.rect.left;this.$refs.pointer.style.transform="translateX(".concat(i,"px"),this.$refs.played.style.width="".concat(i/this.width*100,"%"),t.target.setPointerCapture(t.pointerId)},pointerMove:function(t){var i;this.isPointerDown&&(i=t.clientX-this.rect.left>this.width?this.width:t.clientX-this.rect.left<0?0:t.clientX-this.rect.left,this.$refs.pointer.style.transform="translateX(".concat(i,"px"),this.$refs.played.style.width="".concat(i/this.width*100,"%"))},pointerUp:function(t){this.isPointerDown=!1,this.$refs.pointer.classList.add("smooth-move");var i=(t.clientX-this.rect.left)/(this.rect.right-this.rect.left);this.seek(this.duration*i)}})},p=u,d=(e("cec3"),e("2877")),h=Object(d["a"])(p,a,n,!1,null,"12d41a0a",null);i["a"]=h.exports},c8e7:function(t,i,e){},ce32:function(t,i,e){"use strict";var a=e("48ad"),n=e.n(a);n.a},cec3:function(t,i,e){"use strict";var a=e("936e"),n=e.n(a);n.a},d218:function(t,i,e){"use strict";var a=e("f0a0"),n=e.n(a);n.a},eb4e:function(t,i,e){"use strict";var a=e("5b55"),n=e.n(a);n.a},f0a0:function(t,i,e){}}]);
//# sourceMappingURL=chunk-2399a56a-legacy.82ab04b6.js.map