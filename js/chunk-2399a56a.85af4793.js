(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2399a56a"],{"01df":function(t,s,i){"use strict";var e=i("4c3d"),a=i.n(e);a.a},"115b":function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"app-loop-text"}},[i("div",{ref:"text",staticClass:"text"},[t._v(t._s(t.text))]),i("div",{ref:"clone",staticClass:"clone"},[t._v(t._s(t.text))])])},a=[],n={props:["text"],data:function(){return{intervalID:0}},created(){this.animate=this._animate.bind(this)},mounted(){this.$nextTick().then(()=>{this.boxWidth=this.$el.clientWidth,this.textWidth=this.$refs.text.clientWidth,this.boxWidth<this.textWidth&&(this.animate(),this.intervalID=setInterval(this.animate,12e3))})},watch:{text(){this.$nextTick().then(()=>{this.boxWidth=this.$el.clientWidth,this.textWidth=this.$refs.text.clientWidth,clearInterval(this.intervalID),this.boxWidth<this.textWidth&&(this.animate(),this.intervalID=setInterval(this.animate,12e3))})}},methods:{_animate(){this.$refs.text.classList.remove("loop"),this.$refs.clone.classList.remove("loop"),this.$refs.text.style.transform="translateX(0px)",this.$refs.clone.style.transform=`translateX(${this.textWidth}px)`,document.body.offsetWidth,this.$refs.text.classList.add("loop"),this.$refs.clone.classList.add("loop"),this.$refs.text.style.transform=`translateX(${-this.textWidth}px)`,this.$refs.clone.style.transform="translateX(0px)"}}},r=n,o=(i("1edd"),i("2877")),c=Object(o["a"])(r,e,a,!1,null,"7033acc7",null);s["a"]=c.exports},"120a":function(t,s,i){},1316:function(t,s,i){"use strict";var e=i("c8e7"),a=i.n(e);a.a},"133d":function(t,s,i){"use strict";var e=i("120a"),a=i.n(e);a.a},"1edd":function(t,s,i){"use strict";var e=i("7942"),a=i.n(e);a.a},"2c31":function(t,s,i){"use strict";var e=i("969a"),a=i.n(e);a.a},"48ad":function(t,s,i){},"4c3d":function(t,s,i){},"5b55":function(t,s,i){},7223:function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"app-back-button",on:{tap:t.back,click:t.back}},[i("app-icon",{attrs:{icon:"go-back"}})],1)},a=[],n={data(){return{lastClick:0}},methods:{back(t){if(Date.now()-this.lastClick<100)return void console.log("duplicate click");this.lastClick=Date.now();const s=this.$store.getters["routeHistory/lastRoute"];s?this.$router.push({name:s,params:{back:!0}}):this.$router.push({name:"discover",params:{back:!0}})}}},r=n,o=(i("1316"),i("2877")),c=Object(o["a"])(r,e,a,!1,null,"6986574d",null);s["a"]=c.exports},7942:function(t,s,i){},8363:function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"play"}},[i("img",{staticClass:"background",attrs:{alt:"背景图片",src:t.picUrl}}),i("div",{staticClass:"content"},[i("div",{staticClass:"header"},[i("app-back-button"),i("app-loop-text",{staticClass:"song-name",attrs:{text:t.playName}}),i("div",{staticClass:"song-artist"},[t._v(t._s(t.playArtist))])],1),i("play-cover"),i("play-interactions"),i("play-progress-bar"),i("play-controls",{attrs:{showPlayList:t.showPlayList},on:{"update:showPlayList":function(s){t.showPlayList=s},"update:show-play-list":function(s){t.showPlayList=s}}}),i("transition",{attrs:{name:"play-list"}},[t.showPlayList?i("play-list",{attrs:{show:t.showPlayList},on:{"update:show":function(s){t.showPlayList=s}}}):t._e()],1)],1)])},a=[],n=i("7223"),r=i("115b"),o=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{class:{rolling:t.playing},attrs:{id:"play-cover"}},[i("img",{staticClass:"cover",attrs:{alt:"专辑图片",src:t.picUrl},on:{dragstart:t.dragPrevent}})])},c=[],l=(i("5319"),i("2f62")),p={computed:{...Object(l["f"])("playStatus",["playing"]),...Object(l["d"])("commonPlay",["playID","playCover"]),picUrl(){return this.playCover?this.playCover.replace("http:","https:"):i("f0cd")}},methods:{dragPrevent(t){t.preventDefault()}}},h=p,u=(i("ce32"),i("2877")),d=Object(u["a"])(h,o,c,!1,null,"473eaf4a",null),f=d.exports,m=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"play-interactions"}},[i("app-like-icon",{staticClass:"like"}),i("app-icon",{staticClass:"comments",attrs:{icon:"comment"}}),i("app-icon",{staticClass:"info",attrs:{icon:"vertical-dots"}})],1)},v=[],y=i("8bb5"),w={components:{AppLikeIcon:y["a"]}},b=w,k=(i("d218"),Object(u["a"])(b,m,v,!1,null,"48d841d8",null)),$=k.exports,g=i("b0b8"),x=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"play-controls"}},[i("div",{staticClass:"mode",on:{click:t.switchMode}},[i("app-icon",{attrs:{icon:t.mode}})],1),i("app-icon",{staticClass:"prev",attrs:{icon:"last-song"},nativeOn:{click:function(s){return t.lastSong(s)}}}),i("div",{staticClass:"play",on:{click:t.playOrPause}},[i("app-icon",{attrs:{icon:t.playing?"pause":"play"}})],1),i("app-icon",{staticClass:"next",attrs:{icon:"next-song"},nativeOn:{click:function(s){return t.nextSong(s)}}}),i("app-icon",{staticClass:"list",attrs:{icon:"playlist"},nativeOn:{click:function(s){return t.$emit("update:showPlayList",!0)}}})],1)},C=[],_={prop:["showPlayList"],computed:{...Object(l["f"])("commonPlay",["mode"]),...Object(l["f"])("playStatus",["playing"])},methods:{...Object(l["e"])("commonPlay",["switchMode","lastSong","nextSong"]),...Object(l["c"])("playStatus",["playOrPause"])}},L=_,P=(i("2c31"),Object(u["a"])(L,x,C,!1,null,"5731920c",null)),O=P.exports,D=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"playing-list"},on:{click:function(s){return s.target!==s.currentTarget?null:t.hide(s)}}},[i("transition",{attrs:{name:"list"}},[t.showList?i("div",{staticClass:"container"},[i("div",{staticClass:"header"},[i("span",{staticClass:"title"},[t._v("当前播放")]),i("span",{staticClass:"amount"},[t._v("（"+t._s(t.playList.length)+"）")]),i("app-icon",{staticClass:"clear",attrs:{icon:"trash"},nativeOn:{click:function(s){return t.clear(s)}}})],1),i("div",{ref:"wrapper",staticClass:"wrapper"},[i("div",{staticClass:"content"},t._l(t.playList,(function(s){return i("div",{key:s.id,class:["entry",{playing:s.id===t.playID}],on:{tap:function(i){return t.playSongOfList(s)}}},[s.id===t.playID?i("app-icon",{staticClass:"icon",attrs:{icon:"speaker"}}):t._e(),i("div",{staticClass:"song-info"},[t._v(" "+t._s(s.name+(s.artist?" - "+s.artist:""))+" ")])],1)})),0)])]):t._e()])],1)},j=[],I=i("424d");const{mapState:S,mapGetters:T,mapMutations:W}=Object(l["a"])("commonPlay");var X={data:function(){return{showList:!1}},porps:["show"],computed:{...S(["playList"]),...T(["playID"])},mounted(){this.$nextTick().then(()=>{this.showList=!0}).then(()=>{this.scroll=Object(I["a"])(0,this.$refs.wrapper)})},update(){this.scroll.refresh()},deactivated(){this.scroll.disable()},activated(){this.scroll&&this.scroll.enable()},beforeDestroy(){this.scroll.destroy()},methods:{...W(["clear","playSongOfList"]),hide(){this.showList=!1,this.$nextTick(()=>{this.$emit("update:show",!1)})},afterLeave(){this.$emit("update:show",!1)}}},E=X,M=(i("eb4e"),Object(u["a"])(E,D,j,!1,null,"153c0567",null)),N=M.exports;const{mapState:U}=Object(l["a"])("playStatus"),{mapGetters:A}=Object(l["a"])("commonPlay");var B={data:function(){return{showPlayList:!1}},computed:{...A(["playName","playArtist","playCover"]),...U(["playing"]),picUrl(){return this.playCover?this.playCover:i("f0cd")}},components:{AppBackButton:n["a"],AppLoopText:r["a"],PlayCover:f,PlayInteractions:$,PlayProgressBar:g["a"],PlayControls:O,PlayList:N}},R=B,G=(i("133d"),Object(u["a"])(R,e,a,!1,null,"36154f50",null));s["default"]=G.exports},"8bb5":function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"app-like-icon"},on:{click:t.click}},[i("transition",{attrs:{name:"like",mode:"out-in"}},[i("app-icon",{key:t.iconName,class:{liked:t.isLiked},attrs:{icon:t.iconName}})],1)],1)},a=[],n=i("d1c7"),r={computed:{login(){return this.$store.state.auth.login},playID(){return this.$store.getters["currentSong"].id},likelist(){return this.$store.state.likelist},isLiked(){return this.likelist.includes(this.playID)},iconName(){return this.isLiked?"like-fill":"like"}},methods:{click(t){this.login?Object(n["a"])("/like",{id:this.playID,like:!this.isLiked}).then(t=>{console.log(t),200===t.code&&this.$store.dispatch("updateLikelist")}):window.confirm("该功能需要登录，是否前往登录？")&&this.$router.push({name:"login",params:{dock:!0}})}}},o=r,c=(i("01df"),i("2877")),l=Object(c["a"])(o,e,a,!1,null,"33665981",null);s["a"]=l.exports},"936e":function(t,s,i){},"969a":function(t,s,i){},b0b8:function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"play-progress-bar"}},[i("div",{staticClass:"time"},[t._v(" "+t._s(t.playTime)+" ")]),i("div",{ref:"container",staticClass:"container",on:{pointerdown:t.pointerDown,pointermove:t.pointerMove,pointerup:t.pointerUp}},[i("div",{staticClass:"groove"},[i("div",{ref:"played",staticClass:"played-section"}),i("div",{ref:"pointer",class:["pointer",{"pointer-down":t.isPointerDown},{waiting:t.waiting}]})])]),i("div",{staticClass:"time"},[t._v(" "+t._s(t.playDuration)+" ")])])},a=[],n=i("2f62");const{mapState:r,mapMutations:o}=Object(n["a"])("playStatus");var c={data:function(){return{isPointerDown:!1}},computed:{...r(["currentTime","duration","waiting"]),playTime:function(){return this.formatTime(this.currentTime)},playDuration:function(){return this.formatTime(this.duration)}},mounted(){this.$nextTick().then(()=>{this.rect=this.$refs.container.getBoundingClientRect()})},watch:{currentTime(t){if(this.isPointerDown)return;const s=Math.max(t/this.duration,0);s<.01&&(this.$refs.pointer.style.transition="none"),this.$refs.pointer.style.transform=`translateX(calc(${s} * (70vw - 0.5rem))`,this.$refs.played.style.width=100*s+"%"}},methods:{...o(["seek"]),formatTime(t){if(isNaN(t))return"-- : --";const s=Math.floor(t),i=s%60,e=(s-i)/60,a=i<10?"0"+i:i,n=e<10?"0"+e:e;return n+":"+a},pointerDown(t){this.isPointerDown=!0,this.rect=this.$refs.container.getBoundingClientRect(),this.width=this.rect.right-this.rect.left;const s=t.clientX-this.rect.left;this.$refs.pointer.style.transform=`translateX(${s}px`,this.$refs.played.style.width=s/this.width*100+"%",t.target.setPointerCapture(t.pointerId)},pointerMove(t){if(this.isPointerDown){let s;s=t.clientX-this.rect.left>this.width?this.width:t.clientX-this.rect.left<0?0:t.clientX-this.rect.left,this.$refs.pointer.style.transform=`translateX(${s}px`,this.$refs.played.style.width=s/this.width*100+"%"}},pointerUp(t){this.isPointerDown=!1,this.$refs.pointer.classList.add("smooth-move");const s=(t.clientX-this.rect.left)/(this.rect.right-this.rect.left);this.seek(this.duration*s)}}},l=c,p=(i("cec3"),i("2877")),h=Object(p["a"])(l,e,a,!1,null,"12d41a0a",null);s["a"]=h.exports},c8e7:function(t,s,i){},ce32:function(t,s,i){"use strict";var e=i("48ad"),a=i.n(e);a.a},cec3:function(t,s,i){"use strict";var e=i("936e"),a=i.n(e);a.a},d218:function(t,s,i){"use strict";var e=i("f0a0"),a=i.n(e);a.a},eb4e:function(t,s,i){"use strict";var e=i("5b55"),a=i.n(e);a.a},f0a0:function(t,s,i){}}]);
//# sourceMappingURL=chunk-2399a56a.85af4793.js.map