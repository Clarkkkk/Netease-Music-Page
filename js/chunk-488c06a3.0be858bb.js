(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-488c06a3"],{1246:function(t,s,a){"use strict";var n=a("f08b"),e=a.n(n);e.a},1316:function(t,s,a){"use strict";var n=a("c8e7"),e=a.n(n);e.a},1980:function(t,s,a){"use strict";var n=a("ff89"),e=a.n(n);e.a},7223:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"app-back-button",on:{tap:t.back,click:t.back}},[a("app-icon",{attrs:{icon:"go-back"}})],1)},e=[],i={data(){return{lastClick:0}},methods:{back(t){if(Date.now()-this.lastClick<100)return void console.log("duplicate click");this.lastClick=Date.now();const s=this.$store.getters["routeHistory/lastRoute"];s?this.$router.push({name:s,params:{back:!0}}):this.$router.push({name:"discover",params:{back:!0}})}}},o=i,c=(a("1316"),a("2877")),r=Object(c["a"])(o,n,e,!1,null,"6986574d",null);s["a"]=r.exports},b109:function(t,s,a){"use strict";a.r(s);var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"rank"}},[a("div",{staticClass:"header"},[a("app-back-button"),a("div",{staticClass:"title"},[t._v("我的听歌排行")])],1),a("nav",{staticClass:"nav"},[a("div",{class:{active:"week-list"===t.nav},on:{click:function(s){t.nav="week-list"}}},[t._v(" 最近一周 ")]),a("div",{class:{active:"all-list"===t.nav},on:{click:function(s){t.nav="all-list"}}},[t._v(" 所有时间 ")])]),a("div",{ref:"wrapper",staticClass:"list"},[a("div",{staticClass:"content"},t._l(t.currentList,(function(s){return a("app-song-entry",{key:s.id,attrs:{songId:s.id,songName:s.name,songArtist:s.artist,songAlbum:s.album,songCover:s.cover},scopedSlots:t._u([{key:"count",fn:function(){return[a("span",{staticClass:"count"},[t._v(t._s(s.playCount+"次"))])]},proxy:!0}],null,!0)})})),1)])])},e=[],i=a("d1c7"),o=a("424d"),c=a("7223"),r=a("c4de"),l={name:"rank",data(){return{weekList:[],allList:[],nav:"week-list"}},computed:{currentList(){return"week-list"===this.nav?this.weekList:this.allList}},components:{AppBackButton:c["a"],AppSongEntry:r["a"]},created(){Object(i["a"])("/user/record",{uid:this.$store.state.auth.userID,type:1}).then(t=>(console.log(t),200===t.code&&(this.weekList=t.weekData.map(t=>{const s=t.song.ar.map(t=>t.name).join("/");return{id:t.song.id,name:t.song.name,artist:s,album:t.song.al.name,cover:t.song.al.picUrl,playCount:t.playCount}})),Object(i["a"])("/user/record",{uid:this.$store.state.auth.userID,type:0}))).then(t=>{console.log(t),200===t.code&&(this.allList=t.allData.map(t=>{const s=t.song.ar.map(t=>t.name).join("/");return{id:t.song.id,name:t.song.name,artist:s,album:t.song.al.name,cover:t.song.al.picUrl,playCount:t.playCount}}))})},mounted(){this.$nextTick().then(()=>{this.scroll=Object(o["a"])(0,this.$refs.wrapper)})},updated(){this.scroll.refresh()},deactivated(){this.scroll.disable()},activated(){this.scroll&&this.scroll.enable()},beforeDestroy(){this.scroll.destroy()}},u=l,p=(a("1980"),a("2877")),d=Object(p["a"])(u,n,e,!1,null,"578f9da8",null);s["default"]=d.exports},c4de:function(t,s,a){"use strict";var n=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"app-song-entry",on:{click:t.play,tap:t.play}},[a("span",{staticClass:"name"},[t._v(" "+t._s(t.songName)+" ")]),a("span",{staticClass:"info"},[t._v(" "+t._s(t.songInfoString)+" ")]),t._t("count")],2)},e=[],i=(a("5319"),a("d1c7")),o={data(){return{lastClick:0}},props:["songName","songArtist","songAlbum","songId","songCover"],computed:{songInfoString:function(){return this.songAlbum?this.songArtist+" - "+this.songAlbum:this.songArtist}},methods:{play(){Date.now()-this.lastClick<100||(this.lastClick=Date.now(),Object(i["a"])("/check/music",{id:this.songId}).then(t=>{console.log(t),t.success?(this.$store.commit("commonPlay/addToPlay",{id:this.songId,name:this.songName,artist:this.songArtist,album:this.songAlbum,cover:this.songCover.replace("http:","https:")}),this.$router.push("/play")):alert("这首歌暂无版权")}))}}},c=o,r=(a("1246"),a("2877")),l=Object(r["a"])(c,n,e,!1,null,"05373035",null);s["a"]=l.exports},c8e7:function(t,s,a){},f08b:function(t,s,a){},ff89:function(t,s,a){}}]);
//# sourceMappingURL=chunk-488c06a3.0be858bb.js.map