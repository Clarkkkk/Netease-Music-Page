(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["songlist"],{"0027":function(t,s,a){"use strict";a.d(s,"a",(function(){return i})),a.d(s,"b",(function(){return e}));var i=function(){var t=this,s=t.$createElement;t._self._c;return t._m(0)},e=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"loading-spinner"}},[a("div",{staticClass:"spinner-icon"},[a("div",{staticClass:"bar bar-one"}),a("div",{staticClass:"bar bar-two"}),a("div",{staticClass:"bar bar-three"}),a("div",{staticClass:"bar bar-four"}),a("div",{staticClass:"bar bar-five"}),a("div",{staticClass:"bar bar-six"}),a("div",{staticClass:"bar bar-seven"}),a("div",{staticClass:"bar bar-eight"}),a("div",{staticClass:"bar bar-nine"}),a("div",{staticClass:"bar bar-ten"}),a("div",{staticClass:"bar bar-eleven"}),a("div",{staticClass:"bar bar-twelve"})])])}]},1246:function(t,s,a){"use strict";var i=a("f08b"),e=a.n(i);e.a},1316:function(t,s,a){"use strict";var i=a("c8e7"),e=a.n(i);e.a},"44cb":function(t,s,a){},"495c":function(t,s,a){"use strict";var i=a("44cb"),e=a.n(i);e.a},"4c86":function(t,s,a){"use strict";a.r(s);var i=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{ref:"wrapper",attrs:{id:"song-list"}},[a("div",{ref:"backgroundBox",staticClass:"background-container"},[a("div",{ref:"background",staticClass:"background fade-in",style:t.bgStyle})]),a("div",{class:["fixed-container",{blur:"songlist"===t.type}]},[a("div",{staticClass:"header"},[a("app-back-button"),a("div",{staticClass:"title"},[t._v(" "+t._s(t.title?t.title:"歌单")+" ")]),a("div",{staticClass:"right"},[t._t("right")],2)],1),a("div",{ref:"info",staticClass:"info"},["songlist"===t.type?a("div",{staticClass:"cover"},[a("img",{staticClass:"fade-in",attrs:{src:t.cover}})]):t._e(),t.name?a("div",{staticClass:"name"},[t._v(" "+t._s(t.name)+" ")]):t._e(),t.creator?a("div",{staticClass:"creator"},[t._v(" "+t._s(t.creator)+" ")]):t._e(),t.description?a("div",{staticClass:"description"},[t._v(" "+t._s(t.description)+" ")]):t._e(),"recommendation"===t.type?a("div",{staticClass:"date"},[t._v(" "+t._s(t.dateString)+" ")]):t._e()]),a("div",{staticClass:"playall",on:{tap:t.playAll}},[a("app-icon",{attrs:{icon:"play-circle"}}),a("span",[t._v("播放全部")])],1)]),a("div",{staticClass:"list"},[a("div",{staticClass:"placeholder"}),t.loading?a("app-loading-icon"):t._e(),t._l(t.list,(function(t){return a("app-song-entry",{key:t.id,staticClass:"entry",attrs:{songName:t.name,songArtist:t.artist,songId:t.id,songAlbum:t.album,songCover:t.cover}})}))],2)])},e=[],n=(a("5319"),a("7223")),r=a("c4de"),c=a("f79c"),o=a("d1c7"),l=a("424d"),d={name:"songlist",data:function(){return{loading:!0,title:"",name:"",creator:"",description:"",cover:a("987d"),tags:[],list:[]}},props:["type","listId"],computed:{dateString:function(){const t=new Date,s=t.getHours();let a="你好";return s>=6&&s<=12?a="早上好":s>=13&&s<=18?a="下午好":s>=19&&s<=24?a="晚上好":s>=0&&s<=5&&(a="早点睡哦"),`${t.getMonth()}月${t.getDate()}日，${a}`},bgStyle:function(){return"songlist"===this.type?`background-image:url(${this.cover})`:"background-image:linear-gradient( 135deg, #FEB692 10%, #EA5455 100%)"}},components:{AppBackButton:n["a"],AppSongEntry:r["a"],AppLoadingIcon:c["default"]},created(){"recommendation"===this.type?(this.title="每日推荐",Object(o["a"])("/recommend/songs").then(t=>{200===t.code&&this.createList(t.data.dailySongs)})):"songlist"===this.type&&Object(o["a"])("/playlist/detail",{id:this.listId}).then(t=>{if(200===t.code){console.log(t),this.name=t.playlist.name,this.creator=t.playlist.creator.nickname,this.description=t.playlist.description,this.cover=t.playlist.coverImgUrl.replace("http:","https:"),this.tags=t.playlist.tags;const s=t.playlist.trackIds.map(t=>t.id).join(",");if(this.createList(t.playlist.tracks),t.playlist.tracks.length<t.playlist.trackCount)return Object(o["a"])("/song/detail",{ids:s})}}).then(t=>{t&&200===t.code&&this.createList(t.songs)})},mounted(){this.cover||(this.$refs.background.style.backgroundImage="linear-gradient( 135deg, #FEB692 10%, #EA5455 100%)")},updated(){this.scroll&&this.scroll.refresh()},deactivated(){this.scroll.disable()},activated(){this.scroll&&this.scroll.enable()},beforeDestroy(){this.scroll.destroy()},watch:{loading(t){t||this.$nextTick().then(()=>{this.scroll=Object(l["a"])(2,this.$refs.wrapper,s);const t=this;function s(s){const a=-s.y/200<1?-s.y/200:1;t.$refs.info.style.opacity=""+(1-a),t.$refs.info.style.height=`calc(12rem + (${s.y}px))`,t.$refs.backgroundBox.style.height=`calc(15rem + (${s.y}px))`,t.$refs.background.style.height=`calc(15rem + (${s.y}px))`}}).catch(t=>{console.log(t)})}},methods:{playAll(){this.$router.push("/play"),this.$store.commit("commonPlay/playTheList",this.list)},createList(t){this.list=t.map(t=>{const s=t.ar.map(t=>t.name).join("/");return{id:t.id,name:t.name,artist:s,album:t.al.name,cover:t.al.picUrl.replace("http:","https:")}}),this.loading=!1}}},u=d,p=(a("495c"),a("2877")),h=Object(p["a"])(u,i,e,!1,null,"65fa9e7d",null);s["default"]=h.exports},5175:function(t,s,a){"use strict";var i=a("bbd5"),e=a.n(i);e.a},"5b38":function(t,s,a){"use strict";var i=a("6232"),e=a.n(i);s["default"]=e.a},6232:function(t,s){},7223:function(t,s,a){"use strict";var i=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"app-back-button",on:{tap:t.back,click:t.back}},[a("app-icon",{attrs:{icon:"go-back"}})],1)},e=[],n={data(){return{lastClick:0}},methods:{back(t){if(Date.now()-this.lastClick<100)return void console.log("duplicate click");this.lastClick=Date.now();const s=this.$store.getters["routeHistory/lastRoute"];s?this.$router.push({name:s,params:{back:!0}}):this.$router.push({name:"discover",params:{back:!0}})}}},r=n,c=(a("1316"),a("2877")),o=Object(c["a"])(r,i,e,!1,null,"6986574d",null);s["a"]=o.exports},"987d":function(t,s,a){t.exports=a.p+"img/default-pic.5cfc656e.jpg"},bbd5:function(t,s,a){},c4de:function(t,s,a){"use strict";var i=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"app-song-entry",on:{click:t.play,tap:t.play}},[a("span",{staticClass:"name"},[t._v(" "+t._s(t.songName)+" ")]),a("span",{staticClass:"info"},[t._v(" "+t._s(t.songInfoString)+" ")]),t._t("count")],2)},e=[],n=(a("5319"),a("d1c7")),r={data(){return{lastClick:0}},props:["songName","songArtist","songAlbum","songId","songCover"],computed:{songInfoString:function(){return this.songAlbum?this.songArtist+" - "+this.songAlbum:this.songArtist}},methods:{play(){Date.now()-this.lastClick<100||(this.lastClick=Date.now(),Object(n["a"])("/check/music",{id:this.songId}).then(t=>{console.log(t),t.success?(this.$store.commit("commonPlay/addToPlay",{id:this.songId,name:this.songName,artist:this.songArtist,album:this.songAlbum,cover:this.songCover.replace("http:","https:")}),this.$router.push("/play")):alert("这首歌暂无版权")}))}}},c=r,o=(a("1246"),a("2877")),l=Object(o["a"])(c,i,e,!1,null,"05373035",null);s["a"]=l.exports},c8e7:function(t,s,a){},f08b:function(t,s,a){},f79c:function(t,s,a){"use strict";var i=a("0027"),e=a("5b38"),n=(a("5175"),a("2877")),r=Object(n["a"])(e["default"],i["a"],i["b"],!1,null,null,null);s["default"]=r.exports}}]);
//# sourceMappingURL=songlist.0b618475.js.map