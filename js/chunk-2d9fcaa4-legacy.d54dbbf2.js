(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d9fcaa4"],{"01df":function(t,e,i){"use strict";var n=i("4c3d"),a=i.n(n);a.a},"115b":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app-loop-text"}},[i("div",{ref:"text",staticClass:"text"},[t._v(t._s(t.text))]),i("div",{ref:"clone",staticClass:"clone"},[t._v(t._s(t.text))])])},a=[],s={props:["text"],data:function(){return{intervalID:0}},created:function(){this.animate=this._animate.bind(this)},mounted:function(){var t=this;this.$nextTick().then((function(){t.boxWidth=t.$el.clientWidth,t.textWidth=t.$refs.text.clientWidth,t.boxWidth<t.textWidth&&(t.animate(),t.intervalID=setInterval(t.animate,12e3))}))},watch:{text:function(){var t=this;this.$nextTick().then((function(){t.boxWidth=t.$el.clientWidth,t.textWidth=t.$refs.text.clientWidth,clearInterval(t.intervalID),t.boxWidth<t.textWidth&&(t.animate(),t.intervalID=setInterval(t.animate,12e3))}))}},methods:{_animate:function(){this.$refs.text.classList.remove("loop"),this.$refs.clone.classList.remove("loop"),this.$refs.text.style.transform="translateX(0px)",this.$refs.clone.style.transform="translateX(".concat(this.textWidth,"px)"),document.body.offsetWidth,this.$refs.text.classList.add("loop"),this.$refs.clone.classList.add("loop"),this.$refs.text.style.transform="translateX(".concat(-this.textWidth,"px)"),this.$refs.clone.style.transform="translateX(0px)"}}},r=s,c=(i("1edd"),i("2877")),o=Object(c["a"])(r,n,a,!1,null,"7033acc7",null);e["a"]=o.exports},1316:function(t,e,i){"use strict";var n=i("c8e7"),a=i.n(n);a.a},1863:function(t,e,i){"use strict";var n=i("906b"),a=i.n(n);a.a},"1edd":function(t,e,i){"use strict";var n=i("7942"),a=i.n(n);a.a},"4c3d":function(t,e,i){},7223:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-back-button",on:{tap:t.back,click:t.back}},[i("app-icon",{attrs:{icon:"go-back"}})],1)},a=[],s={data:function(){return{lastClick:0}},methods:{back:function(t){if(Date.now()-this.lastClick<100)console.log("duplicate click");else{this.lastClick=Date.now();var e=this.$store.getters["routeHistory/lastRoute"];e?this.$router.push({name:e,params:{back:!0}}):this.$router.push({name:"discover",params:{back:!0}})}}}},r=s,c=(i("1316"),i("2877")),o=Object(c["a"])(r,n,a,!1,null,"6986574d",null);e["a"]=o.exports},7942:function(t,e,i){},"8bb5":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app-like-icon"},on:{click:t.click}},[i("transition",{attrs:{name:"like",mode:"out-in"}},[i("app-icon",{key:t.iconName,class:{liked:t.isLiked},attrs:{icon:t.iconName}})],1)],1)},a=[],s=(i("caad"),i("2532"),i("d1c7")),r={computed:{login:function(){return this.$store.state.auth.login},playID:function(){return this.$store.getters["currentSong"].id},likelist:function(){return this.$store.state.likelist},isLiked:function(){return this.likelist.includes(this.playID)},iconName:function(){return this.isLiked?"like-fill":"like"}},methods:{click:function(t){var e=this;this.login?Object(s["a"])("/like",{id:this.playID,like:!this.isLiked}).then((function(t){console.log(t),200===t.code&&e.$store.dispatch("updateLikelist")})):window.confirm("该功能需要登录，是否前往登录？")&&this.$router.push({name:"login",params:{dock:!0}})}}},c=r,o=(i("01df"),i("2877")),l=Object(o["a"])(c,n,a,!1,null,"33665981",null);e["a"]=l.exports},"906b":function(t,e,i){},"90ee":function(t,e,i){"use strict";var n=i("ce92"),a=i.n(n);a.a},"936e":function(t,e,i){},"987d":function(t,e,i){t.exports=i.p+"img/default-pic.5cfc656e.jpg"},a15b:function(t,e,i){"use strict";var n=i("23e7"),a=i("44ad"),s=i("fc6a"),r=i("a640"),c=[].join,o=a!=Object,l=r("join",",");n({target:"Array",proto:!0,forced:o||!l},{join:function(t){return c.call(s(this),void 0===t?",":t)}})},b0b8:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"play-progress-bar"}},[i("div",{staticClass:"time"},[t._v(" "+t._s(t.playTime)+" ")]),i("div",{ref:"container",staticClass:"container",on:{pointerdown:t.pointerDown,pointermove:t.pointerMove,pointerup:t.pointerUp}},[i("div",{staticClass:"groove"},[i("div",{ref:"played",staticClass:"played-section"}),i("div",{ref:"pointer",class:["pointer",{"pointer-down":t.isPointerDown},{waiting:t.waiting}]})])]),i("div",{staticClass:"time"},[t._v(" "+t._s(t.playDuration)+" ")])])},a=[],s=i("5530"),r=i("2f62"),c=Object(r["a"])("playStatus"),o=c.mapState,l=c.mapMutations,u={data:function(){return{isPointerDown:!1}},computed:Object(s["a"])(Object(s["a"])({},o(["currentTime","duration","waiting"])),{},{playTime:function(){return this.formatTime(this.currentTime)},playDuration:function(){return this.formatTime(this.duration)}}),mounted:function(){var t=this;this.$nextTick().then((function(){t.rect=t.$refs.container.getBoundingClientRect()}))},watch:{currentTime:function(t){if(!this.isPointerDown){var e=Math.max(t/this.duration,0);e<.01&&(this.$refs.pointer.style.transition="none"),this.$refs.pointer.style.transform="translateX(calc(".concat(e," * (70vw - 0.5rem))"),this.$refs.played.style.width="".concat(100*e,"%")}}},methods:Object(s["a"])(Object(s["a"])({},l(["seek"])),{},{formatTime:function(t){if(isNaN(t))return"-- : --";var e=Math.floor(t),i=e%60,n=(e-i)/60,a=i<10?"0"+i:i,s=n<10?"0"+n:n;return s+":"+a},pointerDown:function(t){this.isPointerDown=!0,this.rect=this.$refs.container.getBoundingClientRect(),this.width=this.rect.right-this.rect.left;var e=t.clientX-this.rect.left;this.$refs.pointer.style.transform="translateX(".concat(e,"px"),this.$refs.played.style.width="".concat(e/this.width*100,"%"),t.target.setPointerCapture(t.pointerId)},pointerMove:function(t){var e;this.isPointerDown&&(e=t.clientX-this.rect.left>this.width?this.width:t.clientX-this.rect.left<0?0:t.clientX-this.rect.left,this.$refs.pointer.style.transform="translateX(".concat(e,"px"),this.$refs.played.style.width="".concat(e/this.width*100,"%"))},pointerUp:function(t){this.isPointerDown=!1,this.$refs.pointer.classList.add("smooth-move");var e=(t.clientX-this.rect.left)/(this.rect.right-this.rect.left);this.seek(this.duration*e)}})},d=u,p=(i("cec3"),i("2877")),h=Object(p["a"])(d,n,a,!1,null,"12d41a0a",null);e["a"]=h.exports},b3ad:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"play"},on:{scroll:t.onScroll}},[i("img",{staticClass:"background fade-in",attrs:{alt:"背景图片",src:t.picUrl}}),i("div",{staticClass:"content"},[i("div",{staticClass:"header"},[i("app-back-button"),i("span",{staticClass:"title"},[t._v("私人FM")])],1),i("img",{staticClass:"cover fade-in",attrs:{alt:"封面图片",src:t.picUrl}}),i("app-loop-text",{staticClass:"song-name",attrs:{text:t.currentSong.name}}),i("div",{staticClass:"song-artist"},[t._v(t._s(t.currentSong.artist))]),i("play-progress-bar"),i("radio-controls")],1)])},a=[],s=(i("a15b"),i("d81d"),i("b0c0"),i("ac1f"),i("5319"),i("5530")),r=i("7223"),c=i("115b"),o=i("b0b8"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"play-controls"}},[i("app-icon",{staticClass:"dislike",attrs:{icon:"like-slash"},nativeOn:{click:function(e){return t.dislike(e)}}}),i("app-like-icon",{staticClass:"like"}),i("div",{staticClass:"play",on:{click:t.playOrPause}},[i("app-icon",{attrs:{icon:t.playing?"pause":"play"}})],1),i("app-icon",{staticClass:"next",attrs:{icon:"next-song"},nativeOn:{click:function(e){return t.nextSong(e)}}}),i("app-icon",{staticClass:"comment",attrs:{icon:"comment"}})],1)},u=[],d=i("2f62"),p=i("d1c7"),h=i("8bb5"),f={computed:Object(s["a"])(Object(s["a"])({},Object(d["f"])("playStatus",["playing"])),{},{playID:function(){return this.$store.getters["currentSong"].id}}),components:{AppLikeIcon:h["a"]},methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(d["e"])("radioPlay",["nextSong"])),Object(d["c"])("playStatus",["playOrPause"])),{},{dislike:function(){var t=this;Object(p["a"])("/fm_trash",{id:this.playID}).then((function(e){200===e.code&&t.nextSong()}))}})},m=f,v=(i("1863"),i("2877")),b=Object(v["a"])(m,l,u,!1,null,"47926812",null),k=b.exports,g={components:{AppBackButton:r["a"],AppLoopText:c["a"],PlayProgressBar:o["a"],RadioControls:k},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(d["f"])("playStatus",["playing"])),Object(d["d"])("radioPlay",["currentSong"])),Object(d["f"])("radioPlay",["radioIndex","radioList"])),{},{picUrl:function(){return this.currentSong.cover?this.currentSong.cover:i("987d")}}),watch:{radioIndex:function(t){t>0&&this.radioList.length-t===1&&this.updateList()}},created:function(){console.log(this.$store),this.updateList(),console.log(this.$store)},methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(d["e"])(["clear"])),Object(d["e"])("radioPlay",["radioListUpdate"])),{},{updateList:function(){var t=this;Object(p["a"])("/personal_fm").then((function(e){console.log(e);var i=e.data.map((function(t){var e=t.artists.map((function(t){return t.name})).join("/");return{id:t.id,name:t.name,artist:e,album:t.album.name,cover:t.album.picUrl.replace("http:","https:")}}));t.radioListUpdate(i)}))},onScroll:function(t){return t.preventDefault(),!1}})},x=g,y=(i("90ee"),Object(v["a"])(x,n,a,!1,null,"43970ac7",null));e["default"]=y.exports},c8e7:function(t,e,i){},ce92:function(t,e,i){},cec3:function(t,e,i){"use strict";var n=i("936e"),a=i.n(n);a.a}}]);
//# sourceMappingURL=chunk-2d9fcaa4-legacy.d54dbbf2.js.map